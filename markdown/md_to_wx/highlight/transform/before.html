import requests_async as requests

async def main(args: Args) -> Output:
    category = args.params['category']
    category_map = {
        '综合': '1',
        '后端': '6809637769959178254',
        '前端': '6809637767543259144',
        'Android': '6809635626879549454',
        'iOS': '6809635626661445640',
        '人工智能': '6809637773935378440',
        '开发工具': '6809637771511070734',
        '代码人生': '6809637776263217160',
        '阅读': '6809637772874219534'
    }
    # 检查分类是否有效
    if category not in category_map:
        raise ValueError(f"无效的分类: {category}，有效分类为: {', '.join(category_map.keys())}")

    # 构建请求URL
    category_id = category_map[category]
    url = f"https://api.juejin.cn/content_api/v1/content/article_rank?category_id={category_id}&type=hot&aid=2608&spider=0"

    # 发送请求
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
    }
    response = await requests.get(url, headers=headers)
    response.raise_for_status()  # 如果响应状态码不是200，将引发HTTPError异常
    data = response.json()
    # 构建输出对象
    ret: Output = {
        "result": data,
    }
    return ret

